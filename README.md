# Kirtan Next

Генератор статического контента сайта песенника [Kirtan Site](https://kirtan.site), версии `^2.0.0`. Выполнен на основе SSG [Next.js](https://nextjs.org).

## Цель проекта

Предоставить лучший и более перспективный пользовательский опыт с использованием современного front-end стека. Перейти на современный способ создания front-end проектов, облегчив тем самым процесс работы над проектом, отладку и поддержку.  

## Структура проекта

типична для фреймворка Next.js, использующего _App Router_ подход. Дополнениями являются:
- папка `./source`, содержащая исходные `json` файлы, из которых генерируются страницы сайта. В папке имеются два стационарных файла:
  - `dependencies.json`, где в формате _ключ-значение_ приведены `git`-адреса репозиториев с исходными данными;
  - `translations.json` -- файл интернационализации сайта.
- папка `./scripts` -- скрипты для установки и обработки исходных данных, валидации интернационализации.

В папку `./source/books` устанавливаются упомянутые исходные данные (см. Скрипты), т.е. тексты песенников, туда же генерируются некоторые дополнительные `json` файлы для каждого песенника:
- `a-z.json` -- файл с индексами песен;
- `authors.json` -- файл с компоновкой песен по авторам;
- `contents.json` -- файл с компоновкой песен по разделам.

Файл `./source/books/songbooks.json` содержит краткую сводную информацию о песенниках.

## Скрипты
- `dev` -- запуск `dev` сервера.
- `build:prod` -- сборка проекта в продакшен.
- `build:test` -- сборка проекта для тестирования.
- `start` -- локальный просмотр собранного проекта.
- `validation` -- валидация интернационализации.
- `install:src` -- важный скрипт, выполняемый перед началом работы с проектом (но после `npm i`). Устанавливает исходные данные (тексты песенников в формате `json`) в `./source/books/<song-book-slug>/...` и генерирует вспомогательные файлы (см. выше).
- `build` -- чисто вспомогательный.  
- `lint`, `type-check` -- вспомогательные, но полезно запускать перед сборкой или время от времени при разработке.
